#show x/3.
%#show distint/2.
values(white;black).
rows(1..size).
cols(1..size).

hint(1, 2, black).
hint(1, 5, white).
hint(1, 7, white).
hint(1, 10, white).
hint(1, 13, black).
hint(1, 15, black).
hint(1, 17, black).
hint(1, 19, black).
hint(1, 26, white).
hint(1, 28, white).
hint(1, 29, white).
hint(2, 7, white).
hint(2, 9, white).
hint(2, 10, white).
hint(2, 19, black).
hint(2, 22, white).
hint(2, 29, white).
hint(3, 2, black).
hint(3, 4, black).
hint(3, 8, white).
hint(3, 15, black).
hint(3, 23, black).
hint(3, 26, white).
hint(3, 27, black).
hint(4, 5, white).
hint(4, 10, black).
hint(4, 13, black).
hint(4, 18, black).
hint(4, 20, black).
hint(4, 22, white).
hint(4, 28, white).
hint(4, 29, white).
hint(5, 1, white).
hint(5, 5, white).
hint(5, 6, white).
hint(5, 12, black).
hint(5, 26, white).
hint(6, 1, white).
hint(6, 4, black).
hint(6, 13, white).
hint(6, 15, white).
hint(6, 16, white).
hint(6, 18, white).
hint(6, 21, white).
hint(6, 24, black).
hint(6, 27, white).
hint(7, 7, black).
hint(7, 13, white).
hint(7, 14, white).
hint(7, 18, white).
hint(7, 21, white).
hint(7, 25, black).
hint(7, 29, white).
hint(7, 30, black).
hint(8, 3, black).
hint(8, 10, white).
hint(8, 19, black).
hint(8, 29, white).
hint(9, 5, white).
hint(9, 9, black).
hint(9, 19, black).
hint(9, 23, black).
hint(9, 26, white).
hint(9, 27, black).
hint(10, 1, white).
hint(10, 5, white).
hint(10, 7, black).
hint(10, 11, black).
hint(10, 15, black).
hint(10, 16, black).
hint(10, 20, white).
hint(10, 25, black).
hint(10, 29, black).
hint(11, 3, black).
hint(11, 6, white).
hint(11, 8, white).
hint(11, 10, black).
hint(11, 20, white).
hint(11, 21, black).
hint(11, 24, white).
hint(12, 2, white).
hint(12, 14, white).
hint(12, 15, white).
hint(12, 18, black).
hint(12, 25, black).
hint(12, 28, white).
hint(12, 29, white).
hint(13, 4, black).
hint(13, 6, black).
hint(13, 12, black).
hint(13, 16, black).
hint(13, 23, white).
hint(13, 26, white).
hint(13, 27, white).
hint(14, 7, white).
hint(14, 10, white).
hint(14, 19, white).
hint(14, 21, white).
hint(15, 1, black).
hint(15, 2, black).
hint(15, 7, white).
hint(15, 8, black).
hint(15, 14, white).
hint(15, 18, black).
hint(15, 22, black).
hint(15, 24, black).
hint(15, 29, black).
hint(16, 5, black).
hint(16, 11, black).
hint(16, 16, black).
hint(16, 18, black).
hint(16, 24, white).
hint(16, 27, black).
hint(16, 30, white).
hint(17, 1, white).
hint(17, 3, white).
hint(17, 6, white).
hint(17, 11, black).
hint(17, 14, black).
hint(17, 23, black).
hint(17, 25, white).
hint(17, 27, black).
hint(18, 1, white).
hint(18, 4, white).
hint(18, 8, white).
hint(18, 10, white).
hint(18, 14, black).
hint(18, 15, black).
hint(18, 23, black).
hint(18, 25, white).
hint(18, 30, black).
hint(19, 2, black).
hint(19, 8, white).
hint(19, 15, black).
hint(19, 21, black).
hint(19, 22, black).
hint(19, 24, black).
hint(19, 28, black).
hint(19, 30, black).
hint(20, 5, black).
hint(20, 17, black).
hint(20, 25, black).
hint(21, 1, white).
hint(21, 3, white).
hint(21, 9, white).
hint(21, 12, black).
hint(21, 13, black).
hint(21, 23, white).
hint(21, 29, black).
hint(21, 30, black).
hint(22, 3, white).
hint(22, 4, white).
hint(22, 11, white).
hint(22, 13, black).
hint(22, 19, white).
hint(23, 1, white).
hint(23, 4, white).
hint(23, 5, white).
hint(23, 7, white).
hint(23, 17, white).
hint(23, 22, white).
hint(23, 25, black).
hint(23, 26, black).
hint(23, 30, white).
hint(24, 5, white).
hint(24, 7, white).
hint(24, 9, white).
hint(24, 11, white).
hint(24, 12, black).
hint(24, 16, white).
hint(24, 17, white).
hint(24, 20, white).
hint(24, 24, white).
hint(24, 25, white).
hint(24, 29, white).
hint(25, 3, black).
hint(25, 13, black).
hint(25, 15, black).
hint(25, 29, white).
hint(26, 1, white).
hint(26, 8, white).
hint(26, 19, black).
hint(26, 22, white).
hint(26, 23, white).
hint(26, 28, black).
hint(27, 4, black).
hint(27, 6, white).
hint(27, 10, black).
hint(27, 13, white).
hint(27, 18, black).
hint(27, 21, black).
hint(27, 28, black).
hint(27, 30, black).
hint(28, 1, white).
hint(28, 3, white).
hint(28, 11, black).
hint(28, 17, white).
hint(28, 27, white).
hint(29, 3, white).
hint(29, 5, white).
hint(29, 10, white).
hint(29, 12, white).
hint(29, 16, black).
hint(29, 17, white).
hint(29, 19, white).
hint(29, 24, white).
hint(30, 4, white).
hint(30, 5, white).
hint(30, 9, white).
hint(30, 14, black).
hint(30, 21, white).
hint(30, 22, black).
hint(30, 25, white).
hint(30, 30, black).

% Genera x(X, Y, white) o x(X, Y, black) y forzamos a que elija uno
{ x(Row, Col, Val) : values(Val) } = 1 :- rows(Row), cols(Col).

x(Row, Col, Val) :- hint(Row, Col, Val).

% Rule 1
% Ejemplo: Genera x(Row, 1, black) o x(Row, 2, black) o x(Row, 3, black) o x(Row, 4, black) y forzamos a que elija 2
{ x(Row, Col, black) : cols(Col) } = size / 2 :- rows(Row).
{ x(Row, Col, black) : rows(Row) } = size / 2 :- cols(Col).

% Rule 2
% No puede haber tres filas seguidas del mismo color
% No puede haber tres columnas seguidas del mismo color
:- x(Row1, Col, Val), x(Row2, Col, Val), x(Row3, Col, Val), Row2 == Row1 + 1, Row3 == Row2 + 1.
:- x(Row, Col1, Val), x(Row, Col2, Val), x(Row, Col3, Val), Col2 == Col1 + 1, Col3 == Col2 + 1.

% Rule 3
% No puede haber una fila que no sea distinta a todas las demas
% No puede haber una columna que no sea distinta a todas las demas
distint_row(Row1, Row2, Col) :- x(Row1, Col, Val1), x(Row2, Col, Val2), Row1 != Row2, Val1 != Val2.
distint_col(Col1, Col2, Row) :- x(Row, Col1, Val1), x(Row, Col2, Val2), Col1 != Col2, Val1 != Val2.

:- rows(Row1), rows(Row2), Row1 != Row2, { distint_row(Row1, Row2, Col) : cols(Col) } = 0.
:- cols(Col1), cols(Col2), Col1 != Col2, { distint_col(Col1, Col2, Row) : rows(Row) } = 0.
